<app-header [title]="pageTitle" [helpUrl]="helpUrl"></app-header>

<ion-content class="ion-margin">
  <form [formGroup]="buildTxForm">
    <div>
      <ion-segment (ionChange)="memoChanged($event)" [value]="savedMemo.memo_type">
        <ion-segment-button value="text">
          <ion-label>Text</ion-label>
        </ion-segment-button>
        <ion-segment-button value="id">
          <ion-label>ID</ion-label>
        </ion-segment-button>
        <ion-segment-button value="hash">
          <ion-label>Hash</ion-label>
        </ion-segment-button>
        <ion-segment-button value="return">
          <ion-label>Return</ion-label>
        </ion-segment-button>
      </ion-segment>
    </div>

    <div formGroupName="memo">
      <app-dynamic-input [inputType]="'text'" [form]="buildTxForm.controls['memo']" [controlName]="'memoType'"
        [isHidden]="true">
      </app-dynamic-input>

      <app-dynamic-input [inputType]="'text'" [form]="buildTxForm.controls['memo']" [controlName]="'memoValue'"
        [placeHolder]="'Memo Value'" [defaultValue]="savedMemo.memo">
      </app-dynamic-input>
      <ion-text color="danger" *ngIf="memo.invalid && (memo.dirty || memo.touched)">

        <div *ngIf="memo.errors.isValidMemo">
          {{ memo.errors.isValidMemo }}
        </div>
      </ion-text>
    </div>

    <ion-item>
      <!-- to do try out material slider -->
      <ion-label>Fee</ion-label>
      <ion-range name="fee" formControlName="fee" [min]="networkFees.min_accepted_fee"
        [max]="networkFees.p99_accepted_fee" color="secondary" pin="true" steps="10">
        <ion-label slot="start">{{networkFees.min_accepted_fee}}</ion-label>
        <ion-label slot="end">{{networkFees.p99_accepted_fee}}</ion-label>
      </ion-range>
    </ion-item>
    <!-- to do: show summary of operations? -->

    <app-saza-date-time [form]="buildTxForm" [controlName]="'startTime'"></app-saza-date-time>
    <app-saza-date-time [form]="buildTxForm" [controlName]="'endTime'"></app-saza-date-time>

    <ion-item>
      <ion-label position="stacked">Source</ion-label>
      <app-select-source [form]="buildTxForm" [controlName]="'source'" [selected]="activeAccount.public">
      </app-select-source>
    </ion-item>

    <div class="ion-margin ion-text-center">
      <ion-button type="button" [disabled]="buildTxForm.invalid">Cancel</ion-button>
      <ion-button type="button" [disabled]="buildTxForm.invalid" (click)="buildTransaction()">Build Transaction
      </ion-button>
    </div>
  </form>
</ion-content>